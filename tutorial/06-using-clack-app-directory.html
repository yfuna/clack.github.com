<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>6. Using Clack.App.Directory | Tutorial | Clack - Web application environment for Common Lisp</title>
    <link href="../main.css" rel="stylesheet" type="text/css" />
  </head>
  <body>

<h1><a href="/">Clack</a></h1>
<p class="tagline">Revenge of Lisp in Web</p>

<h2>Chapter 6: Using Clack.App.Directory</h2>

<p class="language">
  <strong>English</strong> | <a href="./ja/06-using-clack-app-directory.html">日本語</a>
</p>

<div id="main">

<p><a href="http://clacklisp.org/doc/clack.app.directory.html">Clack.App.Directory</a> is a real example of a Clack application that uses <code>&lt;component&gt;</code>. This application returns directory information as an HTML page.</p>

<p>Using this application is pretty easy:</p>

<pre>
;; mount /Users/nitro_idiot/ to http://localhost:5000/
(clack:clackup
 (make-instance 'clack.app.directory:&lt;clack-app-directory&gt;
    :root #p"/path/to/your/home")
    :port 5000)
</pre>

<p>Open your web browser and go to http://localhost:5000/. You will see a list of files in your home directory.</p>

<img src="./clack-app-directory.png" width="80%"/>

<p>Can you see why this application has implemented not just as a function but by using <code>&lt;component&gt;</code>? When you create the instance, you can set <code>:root</code>, which changes the behavior of the application. It is difficult to achieve this functionality by using functions.</p>

<p>I know functions that return a closure can do similar thing. But that would be complicated. There is also another advantage of using classes: <strong>inheritance</strong>. To tell the truth, <code>&lt;clack-app-directory&gt;</code> doesn't inherit <code>&lt;component&gt;</code> directly. It inehrits <code>&lt;clack-app-file&gt;</code> which returns a file (not directory information). What <code>&lt;clack-app-directory&gt;</code> per se has implemented is only the feature to returning a list of files in a directory.</p>
<p>If you are curious about these stuffs, please take a look at directory.lisp and file.lisp in the core/apps/directory. These will tell you how components are used in details.</p>

</div>

<div id="footer">
  <div class="left"><a href="05-component.html">&lt;&lt;5. Component</a></div>
  <div class="center"><a href="./">Tutorial</a></div>
  <div class="right"><a href="07-middleware.html">7. Middleware &gt;&gt;</a></div>
</div>

  </body>
</html>
