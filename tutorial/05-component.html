<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>5. Component | Tutorial | Clack - Web application environment for Common Lisp</title>
    <link href="../main.css" rel="stylesheet" type="text/css" />
  </head>
  <body>

<h1><a href="/">Clack</a></h1>
<p class="tagline">Revenge of Lisp in Web</p>

<h2>Chapter 5: Component</h2>

<p class="language">
  <strong>English</strong> | <a href="./ja/05-component.html">日本語</a>
</p>

<div id="main">

<p>Sorry. I told a lie in <a href="03-hello-world.html">Chapter 3</a>: <cite>Clack application is just a function.</cite> The truth is, <strong>it's not always a function</strong>. See this example:</p>

<pre>
;; importing symbols for readability.
(import '(clack:call clack:&lt;component&gt;))

(defclass &lt;sample-app&gt; (&lt;component&gt;) ())

(defmethod call ((this &lt;sample-app&gt;) env)
  (declare (ignore env))
  '(200
    (:content-type "text/plain")
    ("Hello, Clack!")))

(clack:clackup
  (make-instance '&lt;sample-app&gt;))
</pre>

<p>This is much similar to what we saw before, isn't it? The differeces are minor: the content of the function was just moved into the <code>call</code> method, and the argument of the <code>clackup</code> is an instance of <code>&lt;sample-app&gt;</code>.</p>

<p>In a nutshell, <code>clackup</code> takes a function or an instance of a subclass of <code>&lt;component&gt;</code> as a Clack application implementation. All components must implement <code>call</code>, which is called for each request.</p>

<p>You may not understand yet how these things work. Don't worry. I'll tell the details with a real example in the next chapter. Please just remember <code>clackup</code> can take a CLOS instance for now.</p>

</div>

<div id="footer">
  <div class="left"><a href="04-the-environment.html">&lt;&lt;4. The Environment</a></div>
  <div class="center"><a href="./">Tutorial</a></div>
  <div class="right"><a href="06-using-clack-app-directory.html">6. Using Clack.App.Directory &gt;&gt;</a></div>
</div>

  </body>
</html>
